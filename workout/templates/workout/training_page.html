<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>IraFit</title>
  {% load static %}
</head>

<body>


<p><a id="logout" href="{% url 'logout' %}">Logout </a></p>
<p><a href="{% url 'dashboard' %}">Home</a></p>
<p><a href="{% url 'add_training' %}">New Training</a></p>
<p><a href="{% url 'all_trainings' %}">All Trainings</a></p>
<br>

<p>{{ request.user.username }}</p>

<h2>Workout</h2>

{% if training.is_fixed == False %}
    <form id="complete-workout-form" method="POST">
        {% csrf_token %}
        <button id="end-workout" type="submit">Save Training</button>
    </form>
{% endif %}

<a href="{% url 'training_edit' training.pk %}">Edit</a>
<h2>{{ training.name}} </h2>
<small>{{ training.created_at | date}}</small>

{% if training.description %}
    <p>{{ training.description}}</p>
{% endif %}

{% if training.is_fixed == False %}
    <form id="exercise-form" action="{% url 'exercise' training.pk %}" method="POST">
        {% csrf_token %}
        <input id="name" type="text" name="name" placeholder="Name">
        <input id="weight" type="text" name="weight" placeholder="Weight (lbs)">
        <input id="repetitions" type="text" name="repetitions" placeholder="Repetitions">
        <input id="add" type="submit" value="Add Exercise">
    </form>
{% endif %}
<hr>

{% if exercises %}
    <table>
        <tbody>
        {% for exercise in exercises %}
            <tr>
                <th scope="row">{{ exercise.name }}</th>
                <td>{{ exercise.weight|floatformat }} lbs</td>
                <td>{{ exercise.repetitions|floatformat}} reps</td>
                      {% if training.is_fixed == False %}
                      <td>
                        <form id="delete-exercise-form" action="{% url 'exercise' training.pk %}" method="GET">
                          {% csrf_token %}
                          <input type="hidden" id="exercise_id" name="exercise_id" value="{{ exercise.pk }}">
                          <input type="hidden" id="workout_id" name="workout_id" value="{{ training.pk }}">
                          <button id="delete-exercise" type="submit">Delete</button>
                        </form>
                      </td>
                      {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
</body>

</html>
